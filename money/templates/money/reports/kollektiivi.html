{% extends "base.html" %}
{% load i18n %}
{% load humanize %}
{% load mathfilters %}
{% block content %}


<h2>Kollektiivi</h2>
<div class="table-responsive">
	<table class="table table-striped">
		<thead>
			<tr>
				<th>{% trans 'Date' %}</th>
				<th>{% trans 'Description' %}</th>
				<th class="number">{% trans 'Credit' %}</th>
				<th class="number">{% trans 'Debit' %}</th>
				<th class="number">{% trans 'ALV charged' %}</th>
				<th class="number">{% trans 'ALV paid' %}</th>
				<th class="number">{% trans 'Balance' %}</th>
				<th>{% trans 'File' %}</th>
			</tr>
		</thead>
		<tbody>
		
 <tr >
	<td class="total head-column">{{ start_date|date:"j M Y" }}</td>
	<td class="total head-column">{% trans 'Opening Balance' %}</td>
	<td class="head-column"></td>
	<td class="head-column"></td>
	<td class="head-column"></td>
	<td class="number head-column"></td>
	<td class="total number head-column">{{ opening_balance|floatformat:2|intcomma }}</td>
	<td></td>
</tr>

{% for d in data %}
 <tr>
	<td>{{ d.transaction.date|date:"j M Y" }}</td>
	<td><a href="{% url 'admin:money_transaction_change' d.transaction.id %}" target="_blank">{{ d.transaction.description }}</a></td>
	<td class="number">{% if d.transaction.credit %}{{ d.transaction.credit|floatformat:2|intcomma }}{% endif %}</td>
	<td class="number">{% if d.transaction.debit %}{{ d.transaction.debit|floatformat:2|intcomma }}{% endif %}</td>
	<td class="number">{% if d.transaction.sales_tax_charged %}{{ d.transaction.sales_tax_charged|floatformat:2|intcomma }}{% endif %}</td>
	<td class="number">{% if d.transaction.sales_tax_paid %}{{ d.transaction.sales_tax_paid|floatformat:2|intcomma }}{% endif %}</td>
	<td class="number">{{ d.balance|floatformat:2|intcomma }}</td>
	<td><a href="{{ MEDIA_URL }}{{ d.transaction.file }}" target="_blank">{{ d.transaction.filename }}</a></td>
</tr>
{% endfor %}

 <tr>
	<td class="total sum-column">{{ end_date|date:"j M Y" }}</td>
	<td class="total sum-column">{% trans 'Totals' %}</td>
	<td class="number total sum-column">{{ totals.total_credit|floatformat:2|intcomma}}</td>
	<td class="number total sum-column">{{ totals.total_debit|floatformat:2|intcomma}}</td>
	<td class="number total sum-column">{{ totals.total_alv_charged|floatformat:2|intcomma}}</td>
	<td class="number total sum-column">{{ totals.total_alv_paid|floatformat:2|intcomma}}</td>
	<td class="number total sum-column"></td>
	<td></td>
</tr>

 <tr>
	<td><b>{{ end_date|date:"j M Y" }}</b></td>
	<td><b>{% trans 'Closing Balance' %}</b></td>
	<td class="number"></td>
	<td class="number"></td>
	<td class="number"></td>
	<td class="number"></td>
	<td class="number total">{{ closing_balance|floatformat:2|intcomma }}</td>
	<td></td>
</tr>	
</tbody>
</table>
</div>


{% endblock %}